# LINE Daily Brief ã‚·ã‚¹ãƒ†ãƒ 

Obsidian Vault ã‹ã‚‰ç‰¹å®šã‚¿ã‚°ä»˜ãã®ãƒ¡ãƒ¢ã‚’æŠ½å‡ºã—ã€LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰æ¯æ—¥1ä»¶é…ä¿¡ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã€‚

## ğŸ“‹ æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Obsidian Vault                          â”‚
â”‚  /Users/masayuki/Obsidian Professional Kit                     â”‚
â”‚                                                                 â”‚
â”‚  - ãƒ¡ãƒ¢ã« #cv_line ã‚¿ã‚°ã‚’ä»˜ã‘ã‚‹ã ã‘                              â”‚
â”‚  - ãƒ†ãƒ¼ãƒã‚¿ã‚° (#ai_gov, #tax ç­‰) ã§åˆ†é¡å¯èƒ½                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ deno task export (æ‰‹å‹• or å®šæœŸå®Ÿè¡Œ)
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Supabase (line_cards)                      â”‚
â”‚                                                                 â”‚
â”‚  - æŠ½å‡ºã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã‚’ä¿å­˜                                        â”‚
â”‚  - é‡è¤‡ãƒã‚§ãƒƒã‚¯ (content_hash)                                  â”‚
â”‚  - ãƒ†ãƒ¼ãƒãƒ»é…ä¿¡å›æ•°ã‚’ç®¡ç†                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ GitHub Actions / Cron (æ¯æ—¥1å›)
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Edge Function (line-daily-brief)                   â”‚
â”‚                                                                 â”‚
â”‚  - ãƒ†ãƒ¼ãƒã®åã‚ŠãŒå°‘ãªã„ã‚«ãƒ¼ãƒ‰ã‚’1ä»¶é¸æŠ                           â”‚
â”‚  - LINE Messaging API ã§ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ                        â”‚
â”‚  - é…ä¿¡å¾Œã«ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LINE å…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ                            â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¤– ä»Šæ—¥ã®ã²ã¨ã“ã¨                                              â”‚
â”‚                                                                 â”‚
â”‚  [ã‚«ãƒ¼ãƒ‰æœ¬æ–‡ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹]                                  â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  Cursorversï½œåŒ»ç™‚AIã‚¬ãƒãƒŠãƒ³ã‚¹                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ·ï¸ Obsidian ã§ã‚„ã‚‹ã“ã¨

### åŸºæœ¬ãƒ«ãƒ¼ãƒ«

1. **é…ä¿¡ã—ãŸã„è¡Œã« `#cv_line` ã‚¿ã‚°ã‚’ä»˜ã‘ã‚‹**
2. **ãƒ†ãƒ¼ãƒã‚¿ã‚°ã‚’ä½µè¨˜ã™ã‚‹ã¨åˆ†é¡ã•ã‚Œã‚‹ï¼ˆä»»æ„ï¼‰**

### ä½¿ç”¨å¯èƒ½ãªãƒ†ãƒ¼ãƒã‚¿ã‚°

| ã‚¿ã‚° | æ„å‘³ | é…ä¿¡æ™‚ã®çµµæ–‡å­— |
|------|------|----------------|
| `#ai_gov` | åŒ»ç™‚AIã‚¬ãƒãƒŠãƒ³ã‚¹ | ğŸ¤– |
| `#tax` | ç¨å‹™ãƒ»è³‡ç”£å½¢æˆ | ğŸ’° |
| `#law` | æ³•å‹™ãƒ»å¥‘ç´„ | âš–ï¸ |
| `#biz` | Cursorversäº‹æ¥­æˆ¦ç•¥ | ğŸ“ˆ |
| `#career` | åŒ»å¸«ã‚­ãƒ£ãƒªã‚¢ãƒ»åƒãæ–¹ | ğŸ‘¨â€âš•ï¸ |
| `#asset` | å€‹äººã®è³‡ç”£å½¢æˆ | ğŸ¦ |
| ï¼ˆã‚¿ã‚°ãªã—ï¼‰ | ä¸€èˆ¬ | ğŸ’¡ |

### ã‚µãƒ³ãƒ—ãƒ«ãƒãƒ¼ãƒˆ

```markdown
# AIã‚¬ãƒãƒŠãƒ³ã‚¹ã®ãƒ¡ãƒ¢

## é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

- åŒ»ç™‚AIã®å°å…¥ã«ã¯ã€å¿…ãšé™¢å†…ã‚¬ãƒãƒŠãƒ³ã‚¹å§”å“¡ä¼šã®æ‰¿èªã‚’å¾—ã‚‹ã“ã¨ #cv_line #ai_gov
- AIè¨ºæ–­æ”¯æ´ã¯ã€Œæœ€çµ‚åˆ¤æ–­ã¯åŒ»å¸«ã€ãŒé‰„å‰‡ã€‚è²¬ä»»ã®æ‰€åœ¨ã‚’å¥‘ç´„æ›¸ã«æ˜è¨˜ #cv_line #law
- å½“ç›´ä»£ã‚’æ¸›ã‚‰ã™ã‚ˆã‚Šã€çŸ¥è­˜ã‚’å£²ã‚‹æ–¹ãŒã‚³ã‚¹ãƒ‘ãŒè‰¯ã„ #cv_line #career

## ç¨å‹™ãƒ¡ãƒ¢

- ã‚³ãƒ³ã‚µãƒ«åå…¥ã¯é›‘æ‰€å¾—ã§ã¯ãªãäº‹æ¥­æ‰€å¾—ã¨ã—ã¦ç”³å‘Šã§ãã‚‹å ´åˆãŒã‚ã‚‹ #cv_line #tax
```

### æ³¨æ„äº‹é …

- **PHIï¼ˆæ‚£è€…æƒ…å ±ï¼‰ã¯çµ¶å¯¾ã«ã‚¿ã‚°ä»˜ã‘ã—ãªã„**
  - ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Œã‚¿ã‚°ä»˜ãè¡Œã€ã®ã¿ã‚’å¤–éƒ¨ã«é€ä¿¡ã—ã¾ã™
  - æ‚£è€…æƒ…å ±ã‚„æ©Ÿå¯†æƒ…å ±ã«ã¯ `#cv_line` ã‚’ä»˜ã‘ãªã„é‹ç”¨ã‚’å¾¹åº•ã—ã¦ãã ã•ã„

- **1è¡ŒãŒ1ã‚«ãƒ¼ãƒ‰ã«ãªã‚‹**
  - é•·ã™ãã‚‹å ´åˆã¯ã€å‰å¾Œ1-2è¡ŒãŒå«ã¾ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™
  - èª­ã¿ã‚„ã™ã„åˆ†é‡ï¼ˆ1-3æ–‡ç¨‹åº¦ï¼‰ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„

---

## ğŸ”§ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cp .env.example .env

# ä»¥ä¸‹ã‚’è¨­å®š
VAULT_PATH=/Users/masayuki/Obsidian Professional Kit
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
LINE_CHANNEL_ACCESS_TOKEN=your-line-channel-access-token
CRON_SECRET=your-random-secret-for-scheduler
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

```bash
cd cursorvers_line_stripe_discord

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨
supabase db push
```

### 3. åŒæœŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ†ã‚¹ãƒˆ

```bash
cd scripts/export-line-cards

# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯æ›¸ãè¾¼ã¾ãªã„ï¼‰
deno task export:dry

# æœ¬ç•ªå®Ÿè¡Œ
deno task export
```

### 4. Edge Function ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
cd cursorvers_line_stripe_discord

# ãƒ‡ãƒ—ãƒ­ã‚¤
supabase functions deploy line-daily-brief

# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
supabase secrets set LINE_CHANNEL_ACCESS_TOKEN=your-token
supabase secrets set CRON_SECRET=your-secret
```

---

## ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã®è¨­å®š

### GitHub Actions (æ¨å¥¨)

`.github/workflows/line-daily-brief.yml`:

```yaml
name: LINE Daily Brief

on:
  schedule:
    # æ¯æ—¥ 07:00 JST (22:00 UTC)
    - cron: '0 22 * * *'
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  send-brief:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger LINE Daily Brief
        run: |
          curl -X POST \
            -H "X-CRON-SECRET: ${{ secrets.LINE_DAILY_BRIEF_CRON_SECRET }}" \
            -H "Content-Type: application/json" \
            "${{ secrets.SUPABASE_URL }}/functions/v1/line-daily-brief"
```

### Manus ã‹ã‚‰å©ãå ´åˆ

```bash
curl -X POST \
  -H "X-CRON-SECRET: your-cron-secret" \
  -H "Content-Type: application/json" \
  "https://your-project.supabase.co/functions/v1/line-daily-brief"
```

---

## ğŸ“Š é‹ç”¨

### ã‚«ãƒ¼ãƒ‰ã®çŠ¶æ…‹ç®¡ç†

| status | æ„å‘³ |
|--------|------|
| `ready` | é…ä¿¡å¯èƒ½ï¼ˆæ–°è¦ã‚«ãƒ¼ãƒ‰ï¼‰ |
| `used` | é…ä¿¡æ¸ˆã¿ï¼ˆå†é…ä¿¡ã•ã‚Œã‚‹å¯èƒ½æ€§ã‚ã‚Šï¼‰ |
| `archived` | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ¸ˆã¿ï¼ˆé…ä¿¡å¯¾è±¡å¤–ï¼‰ |

### ã‚«ãƒ¼ãƒ‰é¸æŠãƒ­ã‚¸ãƒƒã‚¯

1. `status = 'ready'` ã®ã‚«ãƒ¼ãƒ‰ã‹ã‚‰é¸æŠ
2. ãƒ†ãƒ¼ãƒã”ã¨ã®ç´¯è¨ˆé…ä¿¡å›æ•°ï¼ˆ`times_used`ï¼‰ã‚’é›†è¨ˆ
3. **æœ€ã‚‚é…ä¿¡å›æ•°ãŒå°‘ãªã„ãƒ†ãƒ¼ãƒ**ã‹ã‚‰1ä»¶ã‚’é¸æŠ
4. åŒã˜ãƒ†ãƒ¼ãƒå†…ã§ã¯ `times_used` ãŒå°‘ãªã„ã‚‚ã®ã‚’å„ªå…ˆ
5. ç›´å‰ã«é…ä¿¡ã—ãŸãƒ†ãƒ¼ãƒã¯é¿ã‘ã¦ãƒãƒ©ã¤ãã‚’å‡ºã™ï¼ˆå€™è£œãŒ2ãƒ†ãƒ¼ãƒä»¥ä¸Šã‚ã‚‹å ´åˆï¼‰

ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ãƒ¼ãƒã®åã‚Šãªãé…ä¿¡ã•ã‚Œã¾ã™ã€‚

### åŒæœŸã®å®šæœŸå®Ÿè¡Œï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

Obsidian ã®æ›´æ–°ã‚’å®šæœŸçš„ã« Supabase ã«åæ˜ ã—ãŸã„å ´åˆï¼š

```yaml
# .github/workflows/sync-line-cards.yml
name: Sync LINE Cards

on:
  schedule:
    - cron: '0 0 * * *' # æ¯æ—¥ 09:00 JST
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - uses: denoland/setup-deno@v1
        with:
          deno-version: v1.x
          
      - name: Sync cards
        env:
          VAULT_PATH: ${{ secrets.VAULT_PATH }}
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}
        run: |
          cd scripts/export-line-cards
          deno task export
```

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚«ãƒ¼ãƒ‰ãŒæŠ½å‡ºã•ã‚Œãªã„

1. `#cv_line` ã‚¿ã‚°ãŒæ­£ã—ãä»˜ã„ã¦ã„ã‚‹ã‹ç¢ºèª
2. ã‚¿ã‚°ã®å‰å¾Œã«ã‚¹ãƒšãƒ¼ã‚¹ãŒã‚ã‚‹ã‹ç¢ºèªï¼ˆ`- text #cv_line` âœ“ï¼‰
3. ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ã§ç¢ºèª: `deno task export:dry`

### LINEé…ä¿¡ãŒå¤±æ•—ã™ã‚‹

1. `LINE_CHANNEL_ACCESS_TOKEN` ãŒæ­£ã—ã„ã‹ç¢ºèª
2. LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‹ç¢ºèª
3. Supabase Functions ã®ãƒ­ã‚°ã‚’ç¢ºèª

### ãƒ†ãƒ¼ãƒãŒ `general` ã«ãªã‚‹

ãƒ†ãƒ¼ãƒã‚¿ã‚° (`#ai_gov` ç­‰) ãŒ `#cv_line` ã¨åŒã˜è¡Œã«ã‚ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
cursorvers_line_stripe_discord/
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â””â”€â”€ 004_line_cards.sql      # ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
â”‚   â””â”€â”€ functions/
â”‚       â””â”€â”€ line-daily-brief/
â”‚           â”œâ”€â”€ index.ts            # Edge Function
â”‚           â””â”€â”€ supabase.toml       # è¨­å®š
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ export-line-cards/
â”‚       â”œâ”€â”€ deno.json               # Denoè¨­å®š
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ main.ts             # ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚       â”‚   â”œâ”€â”€ extractor.ts        # æŠ½å‡ºãƒ­ã‚¸ãƒƒã‚¯
â”‚       â”‚   â”œâ”€â”€ supabase-client.ts  # DBæ“ä½œ
â”‚       â”‚   â””â”€â”€ types.ts            # å‹å®šç¾©
â”‚       â””â”€â”€ test/
â”‚           â””â”€â”€ extractor_test.ts   # ãƒ†ã‚¹ãƒˆ
â””â”€â”€ docs/
    â””â”€â”€ LINE_DAILY_BRIEF.md         # ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```
